.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_examples_01-filter_slicing.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_01-filter_slicing.py:


Slicing
~~~~~~~

Extract thin planar slices from a volume


.. code-block:: default

    # sphinx_gallery_thumbnail_number = 2
    import pyvista as pv
    from pyvista import examples
    import matplotlib.pyplot as plt
    import numpy as np







PyVista meshes have several slicing filters bound directly to all datasets.
Thes filters allow you to slice through a volumetric dataset to extract and
view sections through the volume of data.

One of the most common slicing filters used in PyVista is the
:func:`pyvista.DataSetFilters.slice_orthogonal` filter which creates three
orthogonal slices through the dataset on the three caresian planes.
For example, let's slice through the sample geostatitical training image
volume. First, load up the volume and preview it:


.. code-block:: default


    mesh = examples.load_channels()
    # define a categorical colormap
    cmap = plt.cm.get_cmap("viridis", 4)


    mesh.plot(cmap=cmap)




.. image:: /examples/01-filter/images/sphx_glr_slicing_001.png
    :class: sphx-glr-single-img




Note that this dataset is a 3D volume and their might be regions within the
volume that we would like to inspect. We can create slices through the mesh
to gain insight about the internals of the volume.


.. code-block:: default


    slices = mesh.slice_orthogonal()

    slices.plot(cmap=cmap)





.. image:: /examples/01-filter/images/sphx_glr_slicing_002.png
    :class: sphx-glr-single-img




The orthogonal slices can be easily translated throughout the volume:


.. code-block:: default


    slices = mesh.slice_orthogonal(x=20, y=20, z=30)
    slices.plot(cmap=cmap)



.. image:: /examples/01-filter/images/sphx_glr_slicing_003.png
    :class: sphx-glr-single-img




We can also add just a single slice of the volume by specifying the origin
and normal of the slicing plane with the :func:`pyvista.DataSetFilters.slice`
filter:


.. code-block:: default


    # Sing slice - origin defaults to center of the mesh
    single_slice = mesh.slice(normal=[1, 1, 0])

    p = pv.Plotter()
    p.add_mesh(mesh.outline(), color="k")
    p.add_mesh(single_slice, cmap=cmap)
    p.show()



.. image:: /examples/01-filter/images/sphx_glr_slicing_004.png
    :class: sphx-glr-single-img




Adding slicing planes uniformly across an axial direction can also be
automated with the :func:`pyvista.DataSetFilters.slice_along_axis` filter:


.. code-block:: default


    slices = mesh.slice_along_axis(n=7, axis="y")

    slices.plot(cmap=cmap)





.. image:: /examples/01-filter/images/sphx_glr_slicing_005.png
    :class: sphx-glr-single-img




Slice Along Line
++++++++++++++++

We can also slice a dataset along a :func:`pyvista.Spline` or
:func:`pyvista.Line` using the :func:`DataSetFilters.slice_along_line` filter.

First, define a line source through a datset of interest. Please note
that this type of slicing is computationally expensive and might take a while
if there are a lot of points in the line - try to keep the resolution of
the line low.


.. code-block:: default


    model = examples.load_channels()


    def path(y):
        """Equation: x = a(y-h)^2 + k"""
        a = 110.0 / 160.0 ** 2
        x = a * y ** 2 + 0.0
        return x, y


    x, y = path(np.arange(model.bounds[2], model.bounds[3], 15.0))
    zo = np.linspace(9.0, 11.0, num=len(y))
    points = np.c_[x, y, zo]
    spline = pv.Spline(points, 15)
    print(spline)






.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    PolyData (0x7f3b8df7da08)
      N Cells:      1
      N Points:     15
      X Bounds:     0.000e+00, 2.475e+02
      Y Bounds:     0.000e+00, 2.400e+02
      Z Bounds:     9.000e+00, 1.100e+01
      N Arrays:     1




Then run the filter


.. code-block:: default

    slc = model.slice_along_line(spline)
    print(slc)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    PolyData (0x7f3b8df7db28)
      N Cells:      49100
      N Points:     49692
      X Bounds:     0.000e+00, 2.500e+02
      Y Bounds:     0.000e+00, 2.415e+02
      Z Bounds:     0.000e+00, 1.000e+02
      N Arrays:     1





.. code-block:: default


    p = pv.Plotter()
    p.add_mesh(slc)
    p.add_mesh(model.outline())
    p.show(cpos=[1, -1, 1])



.. image:: /examples/01-filter/images/sphx_glr_slicing_006.png
    :class: sphx-glr-single-img





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  31.095 seconds)


.. _sphx_glr_download_examples_01-filter_slicing.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: slicing.py <slicing.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: slicing.ipynb <slicing.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
